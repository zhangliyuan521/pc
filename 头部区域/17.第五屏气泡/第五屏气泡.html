<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>0105</title>
  <link rel="stylesheet" href="./css/index.css">
</head>
<body>
<!--最外侧包裹容器-->
<div id="wrap">
  <!--头部区域-->
  <header id="header">
    <!--头部真正承接内容区域-->
    <div class="headerMain">
      <!--左侧ogo区域-->
      <h1 class="logo">
        <a href="https://wwww.atguigu.com">
          <img src="./img/logo.png" alt="atguigu">
        </a>
      </h1>
      <!--右侧导航区域-->
      <nav class="nav">
        <ul class="navList clearfix">
          <!--第一屏导航-->
          <li class="navItem">
            <a href="javascript:;">
              <div class="up"><img src="./img/home_gruen.png"></div>
              <div class="down"><img src="./img/home.png"></div>
            </a>
          </li>
          <!--第二屏导航-->
          <li class="navItem">
            <a href="javascript:;">
              <div class="up">Course</div>
              <div class="down">Course</div>
            </a>
          </li>
          <!--第三屏导航-->
          <li class="navItem">
            <a href="javascript:;">
              <div class="up">Works</div>
              <div class="down">Works</div>
            </a>
          </li>
          <!--第四屏导航-->
          <li class="navItem">
            <a href="javascript:;">
              <div class="up">About</div>
              <div class="down">About</div>
            </a>
          </li>
          <!--第五屏导航-->
          <li class="navItem">
            <a href="javascript:;">
              <div class="up">Team</div>
              <div class="down">Team</div>
            </a>
          </li>
          
        </ul>
      </nav>
      <!--小三角-->
      <div class="arrow"></div>
    </div>
  </header>
  <!--内容区-->
  <section id="content">
    <!--每一屏的容器-->
    <ul class="contentList">
      <!--第一屏-->
      <li class="contentItem home">
        <div class="contentInner">
          <!--首屏轮播图容器-->
          <ul class="homeConverList">
            <li class="homeConverItem active"><div  class="commonTitle">one Layer</div></li>
            <li class="homeConverItem"><div class="commonTitle">two Layer</div></li>
            <li class="homeConverItem "><div class="commonTitle">three Layer</div></li>
            <li class="homeConverItem "><div class="commonTitle">four Layer</div></li>
          </ul>
          <!--轮播图导航区域-->
          <ul class="homeConverNavList clearfix">
            <li class="homeConverNavItem active"></li>
            <li class="homeConverNavItem"></li>
            <li class="homeConverNavItem"></li>
            <li class="homeConverNavItem"></li>
          </ul>
        </div>
      </li>
      <!--第二屏-->
      <li class="contentItem course">
        <div class="contentInner">
          <div class="course1">
            <p class="commonTitle">EINIGE</p>
            <p class="commonTitle">UNSERER</p>
            <p class="commonTitle">KUNDEN</p>
          </div>
          <div class="course2">
            <p class="commonText">
              Das Kundenvertrauen in unsere Kompetenz ist die notwendige Basis einer erfolgreichen Zusammenarbeit, gleichzeitig aber auch das größte Lob, das man uns entgegenbringen kann.
            </p>
            <p class="commonText">
              Diese und viele weitere große und kleine Kunden vertrauen uns seit Jahren, was uns stolz macht, und dafür sagen wir an dieser Stelle einfach mal.
            </p>
          </div>
          <div class="course3">
            <div class="plus"></div>
            <div class="plus"></div>
            <div class="plus"></div>
            <div class="plus"></div>
            <div class="plus"></div>
            <div class="course3Item">
              <div class="front"></div>
              <div class="back">我是一段文字</div>
            </div>
            <div class="course3Item">
              <div class="front"></div>
              <div class="back">班长也很帅</div>
            </div>
            <div class="course3Item">
              <div class="front"></div>
              <div class="back"></div>
            </div>
            <div class="course3Item">
              <div class="front"></div>
              <div class="back"></div>
            </div>
            <div class="course3Item">
              <div class="front"></div>
              <div class="back"></div>
            </div>
            <div class="course3Item">
              <div class="front"></div>
              <div class="back"></div>
            </div>
            <div class="course3Item">
              <div class="front"></div>
              <div class="back"></div>
            </div>
            <div class="course3Item">
              <div class="front"></div>
              <div class="back"></div>
            </div>
            <div class="course3Item">
              <div class="front"></div>
              <div class="back"></div>
            </div>
            <div class="course3Item">
              <div class="front"></div>
              <div class="back"></div>
            </div>
            <div class="course3Item">
              <div class="front"></div>
              <div class="back"></div>
            </div>
            <div class="course3Item">
              <div class="front"></div>
              <div class="back"></div>
            </div>
          </div>
        </div>
      </li>
      <!--第三屏-->
      <li class="contentItem works">
        <div class="contentInner">
          <div class="works1">
            <p class="commonTitle">EINBLICK</p>
            <p class="commonTitle">ERKENNTNIS</p>
            <p class="commonTitle">ERGEBNIS</p>
          </div>
          <div class="works2 clearfix">
            <div class="works2Item">
              <img src="./img/worksimg1.jpg">
              <div class="mask">
                <span class="maskText">我是一段文字</span>
                <div class="icon"></div>
              </div>
            </div>
            <div class="works2Item">
              <img src="./img/worksimg2.jpg">
              <div class="mask">
                <span class="maskText">我是一段文字</span>
                <div class="icon"></div>
              </div>
            </div>
            <div class="works2Item">
              <img src="./img/worksimg3.jpg">
              <div class="mask">
                <span class="maskText">我是一段文字</span>
                <div class="icon"></div>
              </div>
            </div>
            <div class="works2Item">
              <img src="./img/worksimg4.jpg">
              <div class="mask">
                <span class="maskText">我是一段文字</span>
                <div class="icon"></div>
              </div>
            </div>
          </div>
          <div class="works3">
            <div class="robot"></div>
          </div>
        </div>
      </li>
      <!--第四屏-->
      <li class="contentItem about">
        <div class="contentInner">
          <div class="about1">
            <p class="commonTitle">EINBLICK</p>
            <p class="commonTitle">ERKENNTNIS</p>
            <p class="commonTitle">ERGEBNIS</p>
          </div>
          <div class="about2">
            <p class="commonText">
              Der bunte Medienmix ist die Faszination die uns antreibt und das, was man an uns schätzt. Von A bis Z und von vorne bis hinten nehmen wir Ihr Projekt unter unsere Fittiche und lassen es zu etwas Großartigem heranwachsen.
            </p>
          </div>
          <div class="about3">
            <div class="about3Item">
              <img src="./img/about2.jpg">
              <div class="mask">
                <ul class="maskList clearfix">
                  <li class="maskItem">
                    <img src="./img/about1.jpg">
                  </li>
                  <li class="maskItem">
                    <img src="./img/about1.jpg">
                  </li>
                  <li class="maskItem">
                    <img src="./img/about1.jpg">
                  </li>
                  <li class="maskItem">
                    <img src="./img/about1.jpg">
                  </li>
                </ul>
              </div>
            </div>
            <div class="about3Item">
              <img src="./img/about4.jpg">
              <div class="mask">
                <ul class="maskList clearfix">
                  <li class="maskItem">
                    <img src="./img/about3.jpg">
                  </li>
                  <li class="maskItem">
                    <img src="./img/about3.jpg">
                  </li>
                  <li class="maskItem">
                    <img src="./img/about3.jpg">
                  </li>
                  <li class="maskItem">
                    <img src="./img/about3.jpg">
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="line"></div>
      </li>
      <!--第五屏-->
      <li class="contentItem team">
        <div class="contentInner">
          <div class="team1">
            <p class="commonTitle">WIR SIND</p>
            <p class="commonTitle">VOXELAIR</p>
          </div>
          <div class="team2">
            <p class="commonText">Wir sind seit 2002 eine Full-Service-Werbeagentur mit Stammsitz in Heimsheim, zwischen Stuttgart und Karlsruhe.</p>
            <p class="commonText">Über 60 Jahre Erfahrung vereinen das gesamte VoxelAir-Team. Dabei hat jedes Voxel neben professionellem Allroundwissen auch sein ganz spezielles Gebiet, um selbst die individuellsten Kundenwünsche schnell und kompetent umzusetzen.</p>
          </div>
          <div class="team3">
            <ul class="team3List clearfix">
              <li class="team3Item"></li>
              <li class="team3Item"></li>
              <li class="team3Item"></li>
              <li class="team3Item"></li>
            </ul>
          </div>
        </div>
      </li>
    </ul>
  </section>

</div>
<script>
  
  window.onload =  function () {
    //获取元素
    var header = document.getElementById('header');
    var navUps = document.querySelectorAll('#header .headerMain .nav .navList .navItem .up');
    var arrow = document.querySelector('#header .headerMain .arrow');
    var navItem = document.querySelectorAll('#header .headerMain .nav .navList .navItem');
    var content = document.getElementById('content');
    var contentItems = document.querySelectorAll('#content .contentList .contentItem');
    var contentList = document.querySelector('#content .contentList');
    var homeConverNavItems = document.querySelectorAll('#content .contentList .home .contentInner .homeConverNavList .homeConverNavItem')
    var homeConverItems = document.querySelectorAll('#content .contentList .home .contentInner .homeConverList .homeConverItem')
    var team3Items = document.querySelectorAll('#content .contentList .team .team3 .team3List .team3Item')
    var team3List = document.querySelector('#content .contentList .team .team3 .team3List')
    var index = 0;//屏幕切换
    var oldIndex = 0;//轮播图的上一次结果
    var timeId;
    var isAnimation = false //标识轮播图是否处于切换状态
    var myCanvas;
    var time1;
    var time2;
    
    //初始化第一个up元素高亮
    navUps[0].style.width = '100%'
    //初始化三角的位置
    arrow.style.left = navItem[0].getBoundingClientRect().left + navItem[0].offsetWidth/2 + 'px';
    
    //响应缩放
    window.onresize = function () {
      contentMove(index)
      contentBind()
    }
    
    //给每一个导航项加点击事件
    headerBind();
    function headerBind() {
      for (var i=0; i<navItem.length; i++ ){
        var item = navItem[i];
        item.index = i //缓存计数器
        //给每一个导航项加点击事件
        item.onclick = function () {
          index = this.index
          contentMove(this.index)
        }
      }
    }
    
    //内容区移动逻辑
    contentMove(4)
    function contentMove(index) {
      //1.给所有的up元素去除高亮
      for (var j=0; j<navUps.length; j++ ){
        navUps[j].style.width = ''
      }
      //2.给当前点击的navItem所包含的up元素高亮
      navUps[index].style.width = '100%'
      //3.切换三角位置
      arrow.style.left = navItem[index].getBoundingClientRect().left + navItem[index].offsetWidth/2 + 'px';
      //4.切换屏幕
      contentList.style.top = -(index) * (document.documentElement.clientHeight - header.offsetHeight) + 'px'

    }

    //内容区设置高度逻辑
    contentBind();
    function contentBind() {
      //给内容区设置高度
      content.style.height = document.documentElement.clientHeight - header.offsetHeight + 'px'
      //给每一屏设置高度
      for (var i=0; i<contentItems.length; i++ ){
        contentItems[i].style.height = document.documentElement.clientHeight - header.offsetHeight + 'px'
      }
    }
    
    //鼠标滚轮
    Scroll();
    function Scroll() {
      //ie/chrome
      document.onmousewheel = function (event) {
        clearTimeout(timeId)
        timeId = setTimeout(function () {
          scrollMove(event)
        },200)
      }
      //firefox
      if(document.addEventListener){
        document.addEventListener('DOMMouseScroll',function (event) {
          clearTimeout(timeId)
          timeId = setTimeout(function () {
            scrollMove(event)
          },200)
        });
      }
      function scrollMove(event) {
        event = event || window.event;
        var flag = '';
        if(event.wheelDelta){
          //ie/chrome
          if(event.wheelDelta > 0){
            //上
            flag = 'up';
          }else {
            //下
            flag = 'down'
          }
        }
        else if(event.detail){
          //firefox
          if(event.detail < 0){
            //上
            flag = 'up';
          }else {
            //下
            flag = 'down'
          }
        }

        switch (flag){
          case 'up':
            //鼠标滚轮向上滚动
            console.log('上')
            if(index>0){
              index--
              contentMove(index)
            }
            
            break;
          case 'down':
            //鼠标滚轮向下滚动
            console.log('下')
            if(index<contentItems.length-1){
              index++
              contentMove(index)
            }
            break;
        }

        //取消默认行为
        event.preventDefault && event.preventDefault();
        return false;
      }
    }
    
    //轮播图点击切换
    home3D();
    function home3D() {
      for (var i=0; i<homeConverNavItems.length; i++ ){
        var item = homeConverNavItems[i];
        item.index = i
        //给轮播图导航小圆点绑定点击事件
        item.onclick = function () {
          //判断轮播图是否正在切换
          if(isAnimation){
            //轮播图正在切换中
            return;
          }
          //重置切换状态
          isAnimation = true
          //动画完成之后，恢复状态
          setTimeout(function () {
            isAnimation = false
          },3000)

          //1.重置所有小圆点
          for (var j=0; j<homeConverNavItems.length; j++ ){
            homeConverNavItems[j].className = 'homeConverNavItem';
          }
          //2.当前加高亮
          this.className = 'homeConverNavItem active';
          //3.切换轮播图
          //判断用户点击的是之前的某一屏，还是以后的某一屏幕
          if(oldIndex<this.index){
            //用户点击的是以后的某一屏
            homeConverItems[oldIndex].className = 'homeConverItem leftHide';
            homeConverItems[this.index].className = 'homeConverItem rightShow';
          }
          else if(oldIndex>this.index){
            //用户点击的是之前的某一屏
            homeConverItems[oldIndex].className = 'homeConverItem rightHide';
            homeConverItems[this.index].className = 'homeConverItem leftShow';
          }
          oldIndex = this.index
        }
      }
    }
    
    //自动轮播
    autoPlay()
    function autoPlay() {
      setInterval(function () {
        //判断轮播图是否正在切换
        if(isAnimation){
          //轮播图正在切换中
          return;
        }
        //重置切换状态
        isAnimation = true
        //动画完成之后，恢复状态
        setTimeout(function () {
          isAnimation = false
        },3000)
        //1.重置所有小圆点
        for (var j=0; j<homeConverNavItems.length; j++ ){
          homeConverNavItems[j].className = 'homeConverNavItem';
        }
        //2.下一个小圆点高亮
        homeConverNavItems[oldIndex+1>homeConverNavItems.length-1?0:oldIndex+1].className = 'homeConverNavItem active';
        //3.自动切换轮播图
        homeConverItems[oldIndex].className = 'homeConverItem leftHide';
        homeConverItems[oldIndex+1>homeConverNavItems.length-1?0:oldIndex+1].className = 'homeConverItem rightShow';

        if(oldIndex<homeConverNavItems.length-1){
          oldIndex++
        }else{
          oldIndex = 0
        }
      },3000)
    }
    
    //第五屏鼠标移出事件
    team3List.onmouseleave = function () {
      //重置所有人物li为半透明
      for (var j=0; j<team3Items.length; j++ ){
        team3Items[j].style.opacity = 0.5
      }
      //删除canvasDOM节点
      myCanvas.remove()
      myCanvas = null;
      clearInterval(time1)
      clearInterval(time2)
    }
    
    //第五屏鼠标移入事件
    for (var i=0; i<team3Items.length; i++ ){
        var item = team3Items[i];
        item.onmouseenter = function () {
          //1.重置所有人物li为半透明
          for (var j=0; j<team3Items.length; j++ ){
            team3Items[j].style.opacity = 0.5
          }
          //2.给当前的高亮
          this.style.opacity = 1
          //3.动态追加一个canvas层
          if(!myCanvas){
            myCanvas = document.createElement('canvas');
            myCanvas.width = this.offsetWidth;
            myCanvas.height = this.offsetHeight;
            addAnimation()
            team3List.appendChild(myCanvas);
          }
          myCanvas.style.left = this.offsetLeft + 'px';
          
        }
    }
    
    
    //给canvas加动画
    function addAnimation() {
      var painting = myCanvas.getContext('2d');
      var arr = [] //承装圆的容器

      //每隔一段时间从容器中取出所有圆，重新摆放在页面上
      time1 = setInterval(function () {
        painting.clearRect(0,0,myCanvas.width,myCanvas.height)
        //加工圆
        for (var j=0; j<arr.length; j++ ){
          var item2 = arr[j];
          item2.deg++;
          item2.x = item2.startX + Math.sin(item2.deg*Math.PI/180) * item2.pathScale * 0.5;
          item2.y = item2.startY - (item2.deg*Math.PI/180) * item2.pathScale * 2.2;
          if(item2.y + item2.r <0){
            arr.splice(j,1)
          }
        }

        for (var i=0; i<arr.length; i++ ){
          var item = arr[i];
          painting.beginPath()
          painting.arc(item.x,item.y,item.r,0,2*Math.PI);
          painting.fillStyle = 'rgba('+item.red+','+item.green+','+item.blue+','+item.a+')'
          painting.fill()
        }
      },16)

      //制造圆的工厂
      time2 = setInterval(function () {
        console.log(arr);
        var obj = {}
        //圆的基础信息
        obj.r = Math.floor(Math.random()*8 + 2);
        obj.x = Math.floor(Math.random()*myCanvas.width);
        obj.y = myCanvas.height + obj.r
        obj.red = Math.floor(Math.random()*255);
        obj.green = Math.floor(Math.random()*255);
        obj.blue = Math.floor(Math.random()*255);
        obj.a = 1
        //圆做曲线运动的属性
        obj.startX = obj.x;
        obj.startY = obj.y;
        obj.deg = 0;
        obj.pathScale = Math.floor(Math.random()*80 + 20)
        arr.push(obj)
      },50)
    }
    
  }
  
</script>

</body>
</html>